{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.218.0"},"children":{"PipelineStack":{"id":"PipelineStack","path":"PipelineStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.218.0"},"children":{"Pipeline":{"id":"Pipeline","path":"PipelineStack/Pipeline","constructInfo":{"fqn":"aws-cdk-lib.pipelines.CodePipeline","version":"2.218.0"},"children":{"Pipeline":{"id":"Pipeline","path":"PipelineStack/Pipeline/Pipeline","constructInfo":{"fqn":"aws-cdk-lib.aws_codepipeline.Pipeline","version":"2.218.0","metadata":[]},"children":{"ArtifactsBucket":{"id":"ArtifactsBucket","path":"PipelineStack/Pipeline/Pipeline/ArtifactsBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.218.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/Pipeline/ArtifactsBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"aws:kms"}}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true}}}},"Policy":{"id":"Policy","path":"PipelineStack/Pipeline/Pipeline/ArtifactsBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.218.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/Pipeline/ArtifactsBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"PipelineArtifactsBucketAEA9A052"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},"/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Principal":{"AWS":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::",{"Ref":"AWS::AccountId"},":role/cdk-hnb659fds-deploy-role-",{"Ref":"AWS::AccountId"},"-",{"Ref":"AWS::Region"}]]}},"Resource":[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}}}},"Role":{"id":"Role","path":"PipelineStack/Pipeline/Pipeline/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.218.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"PipelineStack/Pipeline/Pipeline/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.218.0","metadata":[]}},"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/Pipeline/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codepipeline.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PipelineStack/Pipeline/Pipeline/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.218.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/Pipeline/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},"/*"]]}]},{"Action":"sts:AssumeRole","Effect":"Allow","Resource":{"Fn::GetAtt":["PipelineSources4k4x4r0simpletodolistCodePipelineActionRoleB1C58848","Arn"]}},{"Action":"sts:AssumeRole","Effect":"Allow","Resource":{"Fn::GetAtt":["PipelineCodeBuildActionRole226DB0CB","Arn"]}},{"Action":"sts:AssumeRole","Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::",{"Ref":"AWS::AccountId"},":role/cdk-hnb659fds-deploy-role-",{"Ref":"AWS::AccountId"},"-",{"Ref":"AWS::Region"}]]}}],"Version":"2012-10-17"},"policyName":"PipelineRoleDefaultPolicy7BDC1ABB","roles":[{"Ref":"PipelineRoleB27FAA37"}]}}}}}}},"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/Pipeline/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_codepipeline.CfnPipeline","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CodePipeline::Pipeline","aws:cdk:cloudformation:props":{"artifactStore":{"type":"S3","location":{"Ref":"PipelineArtifactsBucketAEA9A052"}},"name":"SimpleTodoPipeline","pipelineType":"V1","restartExecutionOnUpdate":true,"roleArn":{"Fn::GetAtt":["PipelineRoleB27FAA37","Arn"]},"stages":[{"name":"Source","actions":[{"name":"s4k4x4r0_simple-todo-list","outputArtifacts":[{"name":"s4k4x4r0_simple_todo_list_Source"}],"actionTypeId":{"category":"Source","version":"1","owner":"AWS","provider":"CodeStarSourceConnection"},"configuration":{"ConnectionArn":"arn:aws:codeconnections:ap-northeast-1:654654223923:connection/20a5fce1-b7b2-48b8-99c4-d7a5e1f3f55b","FullRepositoryId":"s4k4x4r0/simple-todo-list","BranchName":"main"},"runOrder":1,"roleArn":{"Fn::GetAtt":["PipelineSources4k4x4r0simpletodolistCodePipelineActionRoleB1C58848","Arn"]}}]},{"name":"Build","actions":[{"name":"Synth","inputArtifacts":[{"name":"s4k4x4r0_simple_todo_list_Source"}],"outputArtifacts":[{"name":"Synth_Output"}],"actionTypeId":{"category":"Build","version":"1","owner":"AWS","provider":"CodeBuild"},"configuration":{"ProjectName":{"Ref":"PipelineBuildSynthCdkBuildProject6BEFA8E6"},"EnvironmentVariables":"[{\"name\":\"_PROJECT_CONFIG_HASH\",\"type\":\"PLAINTEXT\",\"value\":\"41170e0abbb1eb5b883a57db1fa52d7f18315b081792c67348fcc7263815e41a\"}]"},"runOrder":1,"roleArn":{"Fn::GetAtt":["PipelineCodeBuildActionRole226DB0CB","Arn"]}}]},{"name":"UpdatePipeline","actions":[{"name":"SelfMutate","inputArtifacts":[{"name":"Synth_Output"}],"actionTypeId":{"category":"Build","version":"1","owner":"AWS","provider":"CodeBuild"},"configuration":{"ProjectName":{"Ref":"PipelineUpdatePipelineSelfMutationDAA41400"},"EnvironmentVariables":"[{\"name\":\"_PROJECT_CONFIG_HASH\",\"type\":\"PLAINTEXT\",\"value\":\"167eef1378d6e6ad8c4c8da3461f900d6e066cd0916052ee812a8d94b87ad38c\"}]"},"runOrder":1,"roleArn":{"Fn::GetAtt":["PipelineCodeBuildActionRole226DB0CB","Arn"]}}]},{"name":"Assets","actions":[{"name":"DeployFrontend_AwsCliLayer_Code","inputArtifacts":[{"name":"Synth_Output"}],"actionTypeId":{"category":"Build","version":"1","owner":"AWS","provider":"CodeBuild"},"configuration":{"ProjectName":{"Ref":"PipelineAssetsFileAsset185A67CB4"}},"runOrder":1,"roleArn":{"Fn::GetAtt":["PipelineCodeBuildActionRole226DB0CB","Arn"]}},{"name":"Custom_CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C_Code","inputArtifacts":[{"name":"Synth_Output"}],"actionTypeId":{"category":"Build","version":"1","owner":"AWS","provider":"CodeBuild"},"configuration":{"ProjectName":{"Ref":"PipelineAssetsFileAsset24D2D639B"}},"runOrder":1,"roleArn":{"Fn::GetAtt":["PipelineCodeBuildActionRole226DB0CB","Arn"]}},{"name":"DeployFrontend_Asset1","inputArtifacts":[{"name":"Synth_Output"}],"actionTypeId":{"category":"Build","version":"1","owner":"AWS","provider":"CodeBuild"},"configuration":{"ProjectName":{"Ref":"PipelineAssetsFileAsset3FE71B523"}},"runOrder":1,"roleArn":{"Fn::GetAtt":["PipelineCodeBuildActionRole226DB0CB","Arn"]}}]},{"name":"Prod","actions":[{"name":"Prepare","inputArtifacts":[{"name":"Synth_Output"}],"actionTypeId":{"category":"Deploy","version":"1","owner":"AWS","provider":"CloudFormation"},"configuration":{"StackName":"Prod-StaticSite","Capabilities":"CAPABILITY_NAMED_IAM,CAPABILITY_AUTO_EXPAND","RoleArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::",{"Ref":"AWS::AccountId"},":role/cdk-hnb659fds-cfn-exec-role-",{"Ref":"AWS::AccountId"},"-",{"Ref":"AWS::Region"}]]},"ActionMode":"CHANGE_SET_REPLACE","ChangeSetName":"PipelineChange","TemplatePath":"Synth_Output::assembly-PipelineStack-Prod/PipelineStackProdStaticSite3EA7F22F.template.json"},"runOrder":1,"roleArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::",{"Ref":"AWS::AccountId"},":role/cdk-hnb659fds-deploy-role-",{"Ref":"AWS::AccountId"},"-",{"Ref":"AWS::Region"}]]}},{"name":"Deploy","actionTypeId":{"category":"Deploy","version":"1","owner":"AWS","provider":"CloudFormation"},"configuration":{"StackName":"Prod-StaticSite","ActionMode":"CHANGE_SET_EXECUTE","ChangeSetName":"PipelineChange"},"runOrder":2,"roleArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::",{"Ref":"AWS::AccountId"},":role/cdk-hnb659fds-deploy-role-",{"Ref":"AWS::AccountId"},"-",{"Ref":"AWS::Region"}]]}}]}]}}},"Source":{"id":"Source","path":"PipelineStack/Pipeline/Pipeline/Source","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"s4k4x4r0_simple-todo-list":{"id":"s4k4x4r0_simple-todo-list","path":"PipelineStack/Pipeline/Pipeline/Source/s4k4x4r0_simple-todo-list","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"CodePipelineActionRole":{"id":"CodePipelineActionRole","path":"PipelineStack/Pipeline/Pipeline/Source/s4k4x4r0_simple-todo-list/CodePipelineActionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.218.0","metadata":[]},"children":{"ImportCodePipelineActionRole":{"id":"ImportCodePipelineActionRole","path":"PipelineStack/Pipeline/Pipeline/Source/s4k4x4r0_simple-todo-list/CodePipelineActionRole/ImportCodePipelineActionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.218.0","metadata":[]}},"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/Pipeline/Source/s4k4x4r0_simple-todo-list/CodePipelineActionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["PipelineRoleB27FAA37","Arn"]}}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PipelineStack/Pipeline/Pipeline/Source/s4k4x4r0_simple-todo-list/CodePipelineActionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.218.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/Pipeline/Source/s4k4x4r0_simple-todo-list/CodePipelineActionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"codestar-connections:UseConnection","Effect":"Allow","Resource":"arn:aws:codeconnections:ap-northeast-1:654654223923:connection/20a5fce1-b7b2-48b8-99c4-d7a5e1f3f55b"},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},"/*"]]}]},{"Action":["s3:PutObjectAcl","s3:PutObjectVersionAcl"],"Effect":"Allow","Resource":{"Fn::Join":["",[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},"/*"]]}}],"Version":"2012-10-17"},"policyName":"PipelineSources4k4x4r0simpletodolistCodePipelineActionRoleDefaultPolicy253C441B","roles":[{"Ref":"PipelineSources4k4x4r0simpletodolistCodePipelineActionRoleB1C58848"}]}}}}}}}}}}},"Build":{"id":"Build","path":"PipelineStack/Pipeline/Pipeline/Build","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Synth":{"id":"Synth","path":"PipelineStack/Pipeline/Pipeline/Build/Synth","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"CdkBuildProject":{"id":"CdkBuildProject","path":"PipelineStack/Pipeline/Pipeline/Build/Synth/CdkBuildProject","constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.PipelineProject","version":"2.218.0","metadata":[]},"children":{"Role":{"id":"Role","path":"PipelineStack/Pipeline/Pipeline/Build/Synth/CdkBuildProject/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.218.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"PipelineStack/Pipeline/Pipeline/Build/Synth/CdkBuildProject/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.218.0","metadata":[]}},"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/Pipeline/Build/Synth/CdkBuildProject/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codebuild.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PipelineStack/Pipeline/Pipeline/Build/Synth/CdkBuildProject/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.218.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/Pipeline/Build/Synth/CdkBuildProject/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/codebuild/",{"Ref":"PipelineBuildSynthCdkBuildProject6BEFA8E6"}]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/codebuild/",{"Ref":"PipelineBuildSynthCdkBuildProject6BEFA8E6"},":*"]]}]},{"Action":["codebuild:CreateReportGroup","codebuild:CreateReport","codebuild:UpdateReport","codebuild:BatchPutTestCases","codebuild:BatchPutCodeCoverages"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":codebuild:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":report-group/",{"Ref":"PipelineBuildSynthCdkBuildProject6BEFA8E6"},"-*"]]}},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"PipelineBuildSynthCdkBuildProjectRoleDefaultPolicyFB6C941C","roles":[{"Ref":"PipelineBuildSynthCdkBuildProjectRole231EEA2A"}]}}}}}}},"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/Pipeline/Build/Synth/CdkBuildProject/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.CfnProject","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CodeBuild::Project","aws:cdk:cloudformation:props":{"artifacts":{"type":"CODEPIPELINE"},"cache":{"type":"NO_CACHE"},"description":"Pipeline step PipelineStack/Pipeline/Build/Synth","encryptionKey":"alias/aws/s3","environment":{"type":"LINUX_CONTAINER","image":"aws/codebuild/standard:7.0","imagePullCredentialsType":"CODEBUILD","privilegedMode":false,"computeType":"BUILD_GENERAL1_SMALL"},"serviceRole":{"Fn::GetAtt":["PipelineBuildSynthCdkBuildProjectRole231EEA2A","Arn"]},"source":{"type":"CODEPIPELINE","buildSpec":"{\n  \"version\": \"0.2\",\n  \"phases\": {\n    \"build\": {\n      \"commands\": [\n        \"npm ci\",\n        \"npm run format:check\",\n        \"npm run lint\",\n        \"npm run typecheck\",\n        \"npm run build\",\n        \"npm run test:e2e\",\n        \"npx cdk synth\"\n      ]\n    }\n  },\n  \"artifacts\": {\n    \"base-directory\": \"cdk.out\",\n    \"files\": \"**/*\"\n  }\n}"}}}}}}}}}},"UpdatePipeline":{"id":"UpdatePipeline","path":"PipelineStack/Pipeline/Pipeline/UpdatePipeline","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"SelfMutate":{"id":"SelfMutate","path":"PipelineStack/Pipeline/Pipeline/UpdatePipeline/SelfMutate","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}},"Assets":{"id":"Assets","path":"PipelineStack/Pipeline/Pipeline/Assets","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"DeployFrontend_AwsCliLayer_Code":{"id":"DeployFrontend_AwsCliLayer_Code","path":"PipelineStack/Pipeline/Pipeline/Assets/DeployFrontend_AwsCliLayer_Code","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Custom_CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C_Code":{"id":"Custom_CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C_Code","path":"PipelineStack/Pipeline/Pipeline/Assets/Custom_CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C_Code","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"DeployFrontend_Asset1":{"id":"DeployFrontend_Asset1","path":"PipelineStack/Pipeline/Pipeline/Assets/DeployFrontend_Asset1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}},"Prod":{"id":"Prod","path":"PipelineStack/Pipeline/Pipeline/Prod","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Prepare":{"id":"Prepare","path":"PipelineStack/Pipeline/Pipeline/Prod/Prepare","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Deploy":{"id":"Deploy","path":"PipelineStack/Pipeline/Pipeline/Prod/Deploy","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}},"MutableRolearn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-deploy-role-${AWS::AccountId}-${AWS::Region}":{"id":"MutableRolearn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-deploy-role-${AWS::AccountId}-${AWS::Region}","path":"PipelineStack/Pipeline/Pipeline/MutableRolearn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-deploy-role-${AWS::AccountId}-${AWS::Region}","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.218.0","metadata":[]}},"arn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-deploy-role-${AWS::AccountId}-${AWS::Region}":{"id":"arn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-deploy-role-${AWS::AccountId}-${AWS::Region}","path":"PipelineStack/Pipeline/Pipeline/arn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-deploy-role-${AWS::AccountId}-${AWS::Region}","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.218.0","metadata":[]},"children":{"8389e75f-0810-4838-bf64-d6f85a95cf83":{"id":"8389e75f-0810-4838-bf64-d6f85a95cf83","path":"PipelineStack/Pipeline/Pipeline/arn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-deploy-role-${AWS::AccountId}-${AWS::Region}/8389e75f-0810-4838-bf64-d6f85a95cf83","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}},"MutableRolearn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-cfn-exec-role-${AWS::AccountId}-${AWS::Region}":{"id":"MutableRolearn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-cfn-exec-role-${AWS::AccountId}-${AWS::Region}","path":"PipelineStack/Pipeline/Pipeline/MutableRolearn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-cfn-exec-role-${AWS::AccountId}-${AWS::Region}","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.218.0","metadata":[]}},"arn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-cfn-exec-role-${AWS::AccountId}-${AWS::Region}":{"id":"arn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-cfn-exec-role-${AWS::AccountId}-${AWS::Region}","path":"PipelineStack/Pipeline/Pipeline/arn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-cfn-exec-role-${AWS::AccountId}-${AWS::Region}","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.218.0","metadata":[]}}}},"CodeBuildActionRole":{"id":"CodeBuildActionRole","path":"PipelineStack/Pipeline/CodeBuildActionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.218.0","metadata":[]},"children":{"ImportCodeBuildActionRole":{"id":"ImportCodeBuildActionRole","path":"PipelineStack/Pipeline/CodeBuildActionRole/ImportCodeBuildActionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.218.0","metadata":[]}},"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/CodeBuildActionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["PipelineRoleB27FAA37","Arn"]}}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PipelineStack/Pipeline/CodeBuildActionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.218.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/CodeBuildActionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["codebuild:BatchGetBuilds","codebuild:StartBuild","codebuild:StopBuild"],"Effect":"Allow","Resource":{"Fn::GetAtt":["PipelineBuildSynthCdkBuildProject6BEFA8E6","Arn"]}},{"Action":["codebuild:BatchGetBuilds","codebuild:StartBuild","codebuild:StopBuild"],"Effect":"Allow","Resource":{"Fn::GetAtt":["PipelineUpdatePipelineSelfMutationDAA41400","Arn"]}},{"Action":["codebuild:BatchGetBuilds","codebuild:StartBuild","codebuild:StopBuild"],"Effect":"Allow","Resource":{"Fn::GetAtt":["PipelineAssetsFileAsset185A67CB4","Arn"]}},{"Action":["codebuild:BatchGetBuilds","codebuild:StartBuild","codebuild:StopBuild"],"Effect":"Allow","Resource":{"Fn::GetAtt":["PipelineAssetsFileAsset24D2D639B","Arn"]}},{"Action":["codebuild:BatchGetBuilds","codebuild:StartBuild","codebuild:StopBuild"],"Effect":"Allow","Resource":{"Fn::GetAtt":["PipelineAssetsFileAsset3FE71B523","Arn"]}}],"Version":"2012-10-17"},"policyName":"PipelineCodeBuildActionRoleDefaultPolicy1D62A6FE","roles":[{"Ref":"PipelineCodeBuildActionRole226DB0CB"}]}}}}}}},"UpdatePipeline":{"id":"UpdatePipeline","path":"PipelineStack/Pipeline/UpdatePipeline","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"SelfMutation":{"id":"SelfMutation","path":"PipelineStack/Pipeline/UpdatePipeline/SelfMutation","constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.PipelineProject","version":"2.218.0","metadata":[]},"children":{"Role":{"id":"Role","path":"PipelineStack/Pipeline/UpdatePipeline/SelfMutation/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.218.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"PipelineStack/Pipeline/UpdatePipeline/SelfMutation/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.218.0","metadata":[]}},"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/UpdatePipeline/SelfMutation/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codebuild.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PipelineStack/Pipeline/UpdatePipeline/SelfMutation/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.218.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/UpdatePipeline/SelfMutation/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/codebuild/",{"Ref":"PipelineUpdatePipelineSelfMutationDAA41400"}]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/codebuild/",{"Ref":"PipelineUpdatePipelineSelfMutationDAA41400"},":*"]]}]},{"Action":["codebuild:CreateReportGroup","codebuild:CreateReport","codebuild:UpdateReport","codebuild:BatchPutTestCases","codebuild:BatchPutCodeCoverages"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":codebuild:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":report-group/",{"Ref":"PipelineUpdatePipelineSelfMutationDAA41400"},"-*"]]}},{"Action":"sts:AssumeRole","Condition":{"ForAnyValue:StringEquals":{"iam:ResourceTag/aws-cdk:bootstrap-role":["image-publishing","file-publishing","deploy"]}},"Effect":"Allow","Resource":{"Fn::Join":["",["arn:*:iam::",{"Ref":"AWS::AccountId"},":role/*"]]}},{"Action":"cloudformation:DescribeStacks","Effect":"Allow","Resource":"*"},{"Action":"s3:ListBucket","Effect":"Allow","Resource":"*"},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"PipelineUpdatePipelineSelfMutationRoleDefaultPolicyA225DA4E","roles":[{"Ref":"PipelineUpdatePipelineSelfMutationRole57E559E8"}]}}}}}}},"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/UpdatePipeline/SelfMutation/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.CfnProject","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CodeBuild::Project","aws:cdk:cloudformation:props":{"artifacts":{"type":"CODEPIPELINE"},"cache":{"type":"NO_CACHE"},"description":"Pipeline step PipelineStack/Pipeline/UpdatePipeline/SelfMutate","encryptionKey":"alias/aws/s3","environment":{"type":"LINUX_CONTAINER","image":"aws/codebuild/standard:7.0","imagePullCredentialsType":"CODEBUILD","privilegedMode":false,"computeType":"BUILD_GENERAL1_SMALL"},"name":"SimpleTodoPipeline-selfupdate","serviceRole":{"Fn::GetAtt":["PipelineUpdatePipelineSelfMutationRole57E559E8","Arn"]},"source":{"type":"CODEPIPELINE","buildSpec":"{\n  \"version\": \"0.2\",\n  \"phases\": {\n    \"install\": {\n      \"commands\": [\n        \"npm install -g aws-cdk@2\"\n      ]\n    },\n    \"build\": {\n      \"commands\": [\n        \"cdk -a . deploy PipelineStack --require-approval=never --verbose\"\n      ]\n    }\n  }\n}"}}}}}}}},"Assets":{"id":"Assets","path":"PipelineStack/Pipeline/Assets","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"FileRole":{"id":"FileRole","path":"PipelineStack/Pipeline/Assets/FileRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.218.0","metadata":[]},"children":{"ImportFileRole":{"id":"ImportFileRole","path":"PipelineStack/Pipeline/Assets/FileRole/ImportFileRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.218.0","metadata":[]}},"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/Assets/FileRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codebuild.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PipelineStack/Pipeline/Assets/FileRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.218.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/Assets/FileRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/codebuild/*"]]}},{"Action":["codebuild:CreateReportGroup","codebuild:CreateReport","codebuild:UpdateReport","codebuild:BatchPutTestCases","codebuild:BatchPutCodeCoverages"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":codebuild:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":report-group/*"]]}},{"Action":["codebuild:BatchGetBuilds","codebuild:StartBuild","codebuild:StopBuild"],"Effect":"Allow","Resource":"*"},{"Action":"sts:AssumeRole","Effect":"Allow","Resource":{"Fn::Sub":"arn:${AWS::Partition}:iam::${AWS::AccountId}:role/cdk-hnb659fds-file-publishing-role-${AWS::AccountId}-${AWS::Region}"}},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"PipelineAssetsFileRoleDefaultPolicy14DB8755","roles":[{"Ref":"PipelineAssetsFileRole59943A77"}]}}}}}}},"FileAsset1":{"id":"FileAsset1","path":"PipelineStack/Pipeline/Assets/FileAsset1","constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.PipelineProject","version":"2.218.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/Assets/FileAsset1/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.CfnProject","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CodeBuild::Project","aws:cdk:cloudformation:props":{"artifacts":{"type":"CODEPIPELINE"},"cache":{"type":"NO_CACHE"},"description":"Pipeline step PipelineStack/Pipeline/Assets/DeployFrontend_AwsCliLayer_Code","encryptionKey":"alias/aws/s3","environment":{"type":"LINUX_CONTAINER","image":"aws/codebuild/standard:7.0","imagePullCredentialsType":"CODEBUILD","privilegedMode":false,"computeType":"BUILD_GENERAL1_SMALL"},"serviceRole":{"Fn::GetAtt":["PipelineAssetsFileRole59943A77","Arn"]},"source":{"type":"CODEPIPELINE","buildSpec":"{\n  \"version\": \"0.2\",\n  \"phases\": {\n    \"install\": {\n      \"commands\": [\n        \"npm install -g cdk-assets@latest\"\n      ]\n    },\n    \"build\": {\n      \"commands\": [\n        \"cdk-assets --path \\\"assembly-PipelineStack-Prod/PipelineStackProdStaticSite3EA7F22F.assets.json\\\" --verbose publish \\\"c49d356cac773d491c5f7ac148995a1181498a8e289429f8612a7f7e3814f535:current_account-current_region-f7e0d18f\\\"\"\n      ]\n    }\n  }\n}"}}}}}},"FileAsset2":{"id":"FileAsset2","path":"PipelineStack/Pipeline/Assets/FileAsset2","constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.PipelineProject","version":"2.218.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/Assets/FileAsset2/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.CfnProject","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CodeBuild::Project","aws:cdk:cloudformation:props":{"artifacts":{"type":"CODEPIPELINE"},"cache":{"type":"NO_CACHE"},"description":"Pipeline step PipelineStack/Pipeline/Assets/Custom_CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C_Code","encryptionKey":"alias/aws/s3","environment":{"type":"LINUX_CONTAINER","image":"aws/codebuild/standard:7.0","imagePullCredentialsType":"CODEBUILD","privilegedMode":false,"computeType":"BUILD_GENERAL1_SMALL"},"serviceRole":{"Fn::GetAtt":["PipelineAssetsFileRole59943A77","Arn"]},"source":{"type":"CODEPIPELINE","buildSpec":"{\n  \"version\": \"0.2\",\n  \"phases\": {\n    \"install\": {\n      \"commands\": [\n        \"npm install -g cdk-assets@latest\"\n      ]\n    },\n    \"build\": {\n      \"commands\": [\n        \"cdk-assets --path \\\"assembly-PipelineStack-Prod/PipelineStackProdStaticSite3EA7F22F.assets.json\\\" --verbose publish \\\"3423a042b818e31c1e34a19d6689ab2e5f9b70fcbe9e71df66f241b20a200bd9:current_account-current_region-a25d76ab\\\"\"\n      ]\n    }\n  }\n}"}}}}}},"FileAsset3":{"id":"FileAsset3","path":"PipelineStack/Pipeline/Assets/FileAsset3","constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.PipelineProject","version":"2.218.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/Assets/FileAsset3/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.CfnProject","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CodeBuild::Project","aws:cdk:cloudformation:props":{"artifacts":{"type":"CODEPIPELINE"},"cache":{"type":"NO_CACHE"},"description":"Pipeline step PipelineStack/Pipeline/Assets/DeployFrontend_Asset1","encryptionKey":"alias/aws/s3","environment":{"type":"LINUX_CONTAINER","image":"aws/codebuild/standard:7.0","imagePullCredentialsType":"CODEBUILD","privilegedMode":false,"computeType":"BUILD_GENERAL1_SMALL"},"serviceRole":{"Fn::GetAtt":["PipelineAssetsFileRole59943A77","Arn"]},"source":{"type":"CODEPIPELINE","buildSpec":"{\n  \"version\": \"0.2\",\n  \"phases\": {\n    \"install\": {\n      \"commands\": [\n        \"npm install -g cdk-assets@latest\"\n      ]\n    },\n    \"build\": {\n      \"commands\": [\n        \"cdk-assets --path \\\"assembly-PipelineStack-Prod/PipelineStackProdStaticSite3EA7F22F.assets.json\\\" --verbose publish \\\"e1ca27a24df6eb2dc06666cba89ba87f75f51d2c1e96216f60abd86ccdda7a1a:current_account-current_region-a2b4d8e1\\\"\"\n      ]\n    }\n  }\n}"}}}}}}}}}},"Prod":{"id":"Prod","path":"PipelineStack/Prod","constructInfo":{"fqn":"aws-cdk-lib.Stage","version":"2.218.0"},"children":{"StaticSite":{"id":"StaticSite","path":"PipelineStack/Prod/StaticSite","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.218.0"},"children":{"SiteBucket":{"id":"SiteBucket","path":"PipelineStack/Prod/StaticSite/SiteBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.218.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PipelineStack/Prod/StaticSite/SiteBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"aws-cdk:cr-owned:3e7b33b3","value":"true"}]}}},"Policy":{"id":"Policy","path":"PipelineStack/Prod/StaticSite/SiteBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.218.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PipelineStack/Prod/StaticSite/SiteBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"SiteBucket397A1860"},"policyDocument":{"Statement":[{"Action":"s3:GetObject","Effect":"Allow","Principal":{"CanonicalUser":{"Fn::GetAtt":["DistributionOrigin1S3Origin5F5C0696","S3CanonicalUserId"]}},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["SiteBucket397A1860","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}}}},"Distribution":{"id":"Distribution","path":"PipelineStack/Prod/StaticSite/Distribution","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.218.0","metadata":[]},"children":{"Origin1":{"id":"Origin1","path":"PipelineStack/Prod/StaticSite/Distribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"S3Origin":{"id":"S3Origin","path":"PipelineStack/Prod/StaticSite/Distribution/Origin1/S3Origin","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.OriginAccessIdentity","version":"2.218.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PipelineStack/Prod/StaticSite/Distribution/Origin1/S3Origin/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCloudFrontOriginAccessIdentity","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CloudFrontOriginAccessIdentity","aws:cdk:cloudformation:props":{"cloudFrontOriginAccessIdentityConfig":{"comment":"Identity for PipelineStackProdStaticSiteDistributionOrigin1F391EAC1"}}}}}}}},"Resource":{"id":"Resource","path":"PipelineStack/Prod/StaticSite/Distribution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["SiteBucket397A1860","RegionalDomainName"]},"id":"PipelineStackProdStaticSiteDistributionOrigin1F391EAC1","s3OriginConfig":{"originAccessIdentity":{"Fn::Join":["",["origin-access-identity/cloudfront/",{"Ref":"DistributionOrigin1S3Origin5F5C0696"}]]}}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"PipelineStackProdStaticSiteDistributionOrigin1F391EAC1","allowedMethods":["GET","HEAD"],"cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"viewerProtocolPolicy":"redirect-to-https"},"defaultRootObject":"index.html","httpVersion":"http2","ipv6Enabled":true}}}}}},"DeployFrontend":{"id":"DeployFrontend","path":"PipelineStack/Prod/StaticSite/DeployFrontend","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_deployment.BucketDeployment","version":"2.218.0"},"children":{"AwsCliLayer":{"id":"AwsCliLayer","path":"PipelineStack/Prod/StaticSite/DeployFrontend/AwsCliLayer","constructInfo":{"fqn":"aws-cdk-lib.lambda_layer_awscli.AwsCliLayer","version":"2.218.0","metadata":[]},"children":{"Code":{"id":"Code","path":"PipelineStack/Prod/StaticSite/DeployFrontend/AwsCliLayer/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.218.0"},"children":{"Stage":{"id":"Stage","path":"PipelineStack/Prod/StaticSite/DeployFrontend/AwsCliLayer/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.218.0"}},"AssetBucket":{"id":"AssetBucket","path":"PipelineStack/Prod/StaticSite/DeployFrontend/AwsCliLayer/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.218.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PipelineStack/Prod/StaticSite/DeployFrontend/AwsCliLayer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnLayerVersion","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::LayerVersion","aws:cdk:cloudformation:props":{"content":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"c49d356cac773d491c5f7ac148995a1181498a8e289429f8612a7f7e3814f535.zip"},"description":"/opt/awscli/aws"}}}}},"CustomResourceHandler":{"id":"CustomResourceHandler","path":"PipelineStack/Prod/StaticSite/DeployFrontend/CustomResourceHandler","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.SingletonFunction","version":"2.218.0","metadata":[]}},"Asset1":{"id":"Asset1","path":"PipelineStack/Prod/StaticSite/DeployFrontend/Asset1","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.218.0"},"children":{"Stage":{"id":"Stage","path":"PipelineStack/Prod/StaticSite/DeployFrontend/Asset1/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.218.0"}},"AssetBucket":{"id":"AssetBucket","path":"PipelineStack/Prod/StaticSite/DeployFrontend/Asset1/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.218.0","metadata":[]}}}},"CustomResource":{"id":"CustomResource","path":"PipelineStack/Prod/StaticSite/DeployFrontend/CustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.218.0","metadata":[]},"children":{"Default":{"id":"Default","path":"PipelineStack/Prod/StaticSite/DeployFrontend/CustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.218.0"}}}}}},"Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C":{"id":"Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C","path":"PipelineStack/Prod/StaticSite/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.218.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"PipelineStack/Prod/StaticSite/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.218.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PipelineStack/Prod/StaticSite/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.218.0","metadata":[]}},"Resource":{"id":"Resource","path":"PipelineStack/Prod/StaticSite/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PipelineStack/Prod/StaticSite/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.218.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PipelineStack/Prod/StaticSite/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::",{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"}]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::",{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["SiteBucket397A1860","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["SiteBucket397A1860","Arn"]},"/*"]]}]},{"Action":["cloudfront:GetInvalidation","cloudfront:CreateInvalidation"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRoleDefaultPolicy88902FDF","roles":[{"Ref":"CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265"}]}}}}}}},"Code":{"id":"Code","path":"PipelineStack/Prod/StaticSite/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.218.0"},"children":{"Stage":{"id":"Stage","path":"PipelineStack/Prod/StaticSite/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.218.0"}},"AssetBucket":{"id":"AssetBucket","path":"PipelineStack/Prod/StaticSite/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.218.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PipelineStack/Prod/StaticSite/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"3423a042b818e31c1e34a19d6689ab2e5f9b70fcbe9e71df66f241b20a200bd9.zip"},"environment":{"variables":{"AWS_CA_BUNDLE":"/etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem"}},"handler":"index.handler","layers":[{"Ref":"DeployFrontendAwsCliLayerD774ED8F"}],"role":{"Fn::GetAtt":["CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265","Arn"]},"runtime":"python3.13","timeout":900}}}}},"BucketName":{"id":"BucketName","path":"PipelineStack/Prod/StaticSite/BucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.218.0"}},"DistributionId":{"id":"DistributionId","path":"PipelineStack/Prod/StaticSite/DistributionId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.218.0"}},"DistributionDomainName":{"id":"DistributionDomainName","path":"PipelineStack/Prod/StaticSite/DistributionDomainName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.218.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"PipelineStack/Prod/StaticSite/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"PipelineStack/Prod/StaticSite/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.218.0"}},"Condition":{"id":"Condition","path":"PipelineStack/Prod/StaticSite/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.218.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"PipelineStack/Prod/StaticSite/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.218.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"PipelineStack/Prod/StaticSite/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.218.0"}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"PipelineStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"PipelineStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.218.0"}},"Condition":{"id":"Condition","path":"PipelineStack/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.218.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"PipelineStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.218.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"PipelineStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.218.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}